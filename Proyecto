import os
import pickle

#Definicion de la Clase
class niveles:
    def __init__(self):
        self.tipo = ""
        self.descripcion = ""
        self.precioPrimeraVez2 = 0 #El numero indica la cantidad de años
        self.precioPrimeraVez5 = 0
        self.precioRenovacion2 = 0
        self.precioRenovacion5 = 0
        self.activo = False

    def __init__(self, tipo, descripcion, precioPrimeraVez2, precioPrimeraVez5, precioRenovacion2, precioRenovacion5, activo):
        self.tipo = tipo
        self.descripcion = descripcion
        self.precioPrimeraVez2 = precioPrimeraVez2
        self.precioPrimeraVez5 = precioPrimeraVez5
        self.precioRenovacion2 = precioRenovacion2
        self.precioRenovacion5 = precioRenovacion5
        self.activo = activo

    def setTipo(self, tipo):
        self.tipo = tipo

    def getTipo(self):
        return self.tipo
    
    def setDescripcion(self, descripcion):
        self.descripcion = descripcion

    def getDescripcion(self):
        return self.descripcion
    
    def setPrecioPrimeraVez2(self, precioPrimeraVez2):
        self.precioPrimeraVez2 = precioPrimeraVez2

    def getPrecioPrimeraVez2(self):
        return self.precioPrimeraVez2
    
    def setPrecioPrimeraVez5(self, precioPrimeraVez5):
        self.precioPrimeraVez5 = precioPrimeraVez5

    def getPrecioPrimeraVez5(self):
        return self.precioPrimeraVez5
    
    def setPrecioRenovacion2(self, precioRenovacion2):
        self.precioRenovacion2 = precioRenovacion2

    def getPrecioRenovacion2(self):
        return self.precioRenovacion2
    
    def setPrecioRenovacion5(self, precioRenovacion5):
        self.precioRenovacion5 = precioRenovacion5

    def getPrecioRenovacion5(self):
        return self.precioRenovacion5
    
    def setActivo(self, activo):
        self.activo = activo

    def getActivo(self):
        return self.activo

    def Imprimir(self):
        print("Tipo: ", self.tipo)
        print("Descripcion: ", self.descripcion)
        print("Precio Primera Vez 2 años: ", self.precioPrimeraVez2)
        print("Precio Primera Vez 5 años: ", self.precioPrimeraVez5)
        print("Precio Renovacion 2 años: ", self.precioRenovacion2)
        print("Precio Renovacion 5 años: ", self.precioRenovacion5)
    
class persona:
    def __init__(self):
        self.nombre = ""
        self.edad = 0
        self.DNI = ""
        self.esPrimeravez = True
        self.niveles = []

    def __init__(self, nombre, edad, DNI, esPrimeravez, niveles):
        self.nombre = nombre
        self.edad = edad
        self.DNI = DNI
        self.esPrimeravez = esPrimeravez
        self.niveles = niveles

    def setNombre(self, nombre):
        self.nombre = nombre

    def getNombre(self):
        return self.nombre
    
    def setEdad(self, edad):
        self.edad = edad

    def getEdad(self):
        return self.edad
        
    def setDNI(self, DNI):
        self.DNI = DNI

    def getDNI(self):
        return self.DNI
        
    def setEsPrimeravez(self, esPrimeravez):
        self.esPrimeravez = esPrimeravez

    def getEsPrimeravez(self):
        return self.esPrimeravez
        
    def setNiveles(self, niveles):
        self.niveles = niveles

    def getNiveles(self):
        return self.niveles
    
    def Imprimir(self):
        print("Nombre: ", self.nombre)
        print("Edad: ", self.edad)
        print("DNI: ", self.DNI)
        print("Es Primera Vez: ", self.esPrimeravez)
        print("Niveles: ")
        for nivel in self.niveles:
            nivel.Imprimir()
            print("")

#Programa Princiapl
class Main:
    Niveles = []
    with open('Niveles.nv', 'rb') as file:
        Niveles = pickle.load(file)
    file.close()

    Personas = []   
    with open("Personas.pr", "rb") as file:
        Personas = pickle.load(file)
    file.close()
    
    
    #Niveles[0].setActivo(True)
    #Niveles[1].setActivo(True)
    #Personas.append(persona("Hailton Amaya", "18", "0501200500100", False, Niveles))
 
   

    Menu = Opcion = str("")
    personaActual = None
    nivel = None
    print("****Bienvenido al DNVT para la Solicitud de la Licencia de Conducir****")

    while Menu != "B":
        Menu = input("A.-> Ingresar Datos\nB.-> Salir\n").capitalize()
        os.system('clear')

        if Menu == "A":
            nombre = input("Ingrese su nombre: ")
            edad = int(input("Ingrese su edad: "))
            DNI = input("Ingrese su DNI(Sin guiones): ")
            
            # Verificar si ya existe la persona en la base de datos
            for p in Personas:
                if p.getDNI() == DNI:
                    personaActual = p
                    break

            if personaActual == None:
                personaActual = persona(nombre, edad, DNI, True, Niveles)
                Personas.append(personaActual)

            print("Usted aplica a las siguientes opciones:")
            if personaActual.getEsPrimeravez():
                print("Opcion#1")
                Niveles[0].Imprimir()
                print("")

                print("Opcion#2")
                Niveles[1].Imprimir()
                print("")
                opcion = int(input("Seleccione una opcion: "))

                if opcion == 1:
                    personaActual.getNiveles()[0].Imprimir()
                elif opcion == 2:
                    personaActual.getNiveles()[1].Imprimir()
                else:
                    print("Opcion no valida")
            else:
                nivel = personaActual.getNiveles()
                for i in range(len(nivel)):
                    if nivel[i].getActivo() == False:
                        print("Opcion#",(i+1))
                        nivel[i].Imprimir()
                        print("")
                    print("")
                

            